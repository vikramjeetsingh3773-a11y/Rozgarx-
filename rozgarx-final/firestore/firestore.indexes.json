{
  "indexes": [

    // ── JOBS: category + lastDate (main feed filter)
    {
      "collectionGroup": "jobs",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "status",   "order": "ASCENDING" },
        { "fieldPath": "category", "order": "ASCENDING" },
        { "fieldPath": "lastDate", "order": "DESCENDING" }
      ]
    },

    // ── JOBS: category + state (state-level filtering)
    {
      "collectionGroup": "jobs",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "status",   "order": "ASCENDING" },
        { "fieldPath": "category", "order": "ASCENDING" },
        { "fieldPath": "state",    "order": "ASCENDING" },
        { "fieldPath": "lastDate", "order": "DESCENDING" }
      ]
    },

    // ── JOBS: organization + createdAt (org-level browsing)
    {
      "collectionGroup": "jobs",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "status",       "order": "ASCENDING" },
        { "fieldPath": "organization", "order": "ASCENDING" },
        { "fieldPath": "createdAt",    "order": "DESCENDING" }
      ]
    },

    // ── JOBS: status + createdAt (admin review queue)
    {
      "collectionGroup": "jobs",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "status",    "order": "ASCENDING" },
        { "fieldPath": "createdAt", "order": "DESCENDING" }
      ]
    },

    // ── JOBS: needsReview queue
    {
      "collectionGroup": "jobs",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "needsReview", "order": "ASCENDING" },
        { "fieldPath": "createdAt",   "order": "DESCENDING" }
      ]
    },

    // ── ARCHIVED JOBS: userId + archivedAt (saved job history)
    {
      "collectionGroup": "archivedJobs",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "category",   "order": "ASCENDING" },
        { "fieldPath": "archivedAt", "order": "DESCENDING" }
      ]
    },

    // ── JOB ANALYTICS: competitionScore sort
    {
      "collectionGroup": "jobAnalytics",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "category",         "order": "ASCENDING" },
        { "fieldPath": "competitionScore", "order": "DESCENDING" }
      ]
    },

    // ── MOCK TESTS: category + createdAt
    {
      "collectionGroup": "mockTests",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "category",  "order": "ASCENDING" },
        { "fieldPath": "createdAt", "order": "DESCENDING" }
      ]
    },

    // ── TEST RESULTS: userId + completedAt
    {
      "collectionGroup": "testResults",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "userId",      "order": "ASCENDING" },
        { "fieldPath": "completedAt", "order": "DESCENDING" }
      ]
    },

    // ── TEST RESULTS: testId + score (leaderboard)
    {
      "collectionGroup": "testResults",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "testId", "order": "ASCENDING" },
        { "fieldPath": "score",  "order": "DESCENDING" }
      ]
    },

    // ── SCRAPER LOGS: sourceId + runAt
    {
      "collectionGroup": "scraperLogs",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "sourceId", "order": "ASCENDING" },
        { "fieldPath": "runAt",    "order": "DESCENDING" }
      ]
    },

    // ── SCRAPER LOGS: status + runAt (find failures)
    {
      "collectionGroup": "scraperLogs",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "runAt",  "order": "DESCENDING" }
      ]
    },

    // ── SUBSCRIPTIONS: userId + status
    {
      "collectionGroup": "subscriptions",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "userId",    "order": "ASCENDING" },
        { "fieldPath": "status",    "order": "ASCENDING" },
        { "fieldPath": "createdAt", "order": "DESCENDING" }
      ]
    },

    // ── SAVED JOBS: userId + savedAt
    {
      "collectionGroup": "savedJobs",
      "queryScope": "COLLECTION_GROUP",
      "fields": [
        { "fieldPath": "userId",  "order": "ASCENDING" },
        { "fieldPath": "savedAt", "order": "DESCENDING" }
      ]
    },

    // ── NOTIFICATIONS: userId + read + createdAt
    {
      "collectionGroup": "notifications",
      "queryScope": "COLLECTION_GROUP",
      "fields": [
        { "fieldPath": "userId",    "order": "ASCENDING" },
        { "fieldPath": "read",      "order": "ASCENDING" },
        { "fieldPath": "createdAt", "order": "DESCENDING" }
      ]
    },

    // ── AD UNLOCKS: userId + unlockedAt (abuse check)
    {
      "collectionGroup": "adUnlocks",
      "queryScope": "COLLECTION_GROUP",
      "fields": [
        { "fieldPath": "userId",     "order": "ASCENDING" },
        { "fieldPath": "unlockedAt", "order": "DESCENDING" }
      ]
    }

  ],

  "fieldOverrides": [

    // ── Disable auto-index on large text fields (performance)
    {
      "collectionGroup": "jobs",
      "fieldPath": "rawText",
      "indexes": []
    },
    {
      "collectionGroup": "jobs",
      "fieldPath": "officialNotificationPDF",
      "indexes": []
    },
    {
      "collectionGroup": "scraperLogs",
      "fieldPath": "rawHtml",
      "indexes": []
    }
  ]
}
